<div ng-include="'components/navbar/navbar.html'"></div>

<!-- Paper dialog of email compose will be displayed on click -->
<paper-dialog transition="core-transition-center" id="emailModal" backdrop closeSelector="[affirmative]" resizerIsPeer=false>
 <!-- <input type="text" ng-model="myData" /> -->
     <!-- *************************add task top card*************************** -->
      <div class = "todoTask" >   
        <div class="emailCardHead">Compose: 
        </div>    
        <div class = "cardBody">
          <form horizontal layout >
            <div>
            <div>
              <paper-input-decorator label="To: " class="inputEmail" id="mailTo" error="Value must start with a number!">
                 <input id="taskName" ng-model="formdata.mailTo" is="core-input">
                 </paper-input-decorator>
             </div>
            <div class="inputEmail">
              <paper-input-decorator label="Subject:" class="inputEmail" id="mailSubject" error="Value must start with a number!">
                 <input id="taskDesc" ng-model="formdata.mailSubject" is="core-input">
                 </paper-input-decorator>
                 <p id="errMsg"></p>
             </div>
            <div>
              <paper-autogrow-textarea label=" " id="a1">
                <textarea class="textAreaClass" id="t1" ng-model="formdata.mailText" placeholder="write short email"></textarea>
              </paper-autogrow-textarea>
             </div>
              <!-- use local ajax -->
              <div class="buttonAdd">
              <paper-button raised affirmative class="emailBtn" ng-click="sendMail()">Send</paper-button>
              <paper-button raised dismissive class="emailDraftBtn" ng-click="saveMail()">Draft</paper-button>
              <!-- use firebase connection -->
               <!-- <button on-click="{{addGoal}}">Add Goal</button> -->
              </div>
             </div>
           </form>
          </div>      
          <div class = "cardFooterAdd" >
           </div>   
      </div>
  </paper-dialog>

<!-- Directive called here   -->
<!-- <main-modal></main-modal> -->
<core-drawer-panel transition id="core_drawer_panel" touch-action>
  <section id= "section1" drawer>
    <core-menu selected="1" selectedindex="1" id="core_menu"> 
      <core-submenu id="core_submenu" icon="settings" label="Todos">
        <core-item id="core_item1" label="This week" horizontal center layout></core-item>
        <core-item id="core_item2" label="Last week" horizontal center layout></core-item>
       </core-submenu>
      <core-submenu active id="core_submenu1" icon="settings" label="iDid">
        <core-item id="core_item3" label="This year" horizontal center layout></core-item>
        <core-item id="core_item4" label="Last year" horizontal center layout></core-item>
        <core-item id="core_item5" label="Timeline" horizontal center layout></core-item>
       </core-submenu>
     </core-menu>
   </section>
  <section id= "section2" main>
    <core-header-panel condenses flex mode="waterfall-tall" id="core_header_panel">

           <!-- geo-location element applied -->
            <div class="userLocation">
              <geo-location watchpos latitude="{{lat}}" longitude="{{longitude}}"></geo-location>
             </div>
      <div class="bottom indent todo">
          
   
    <!-- FACEBOOK DIRECTIVE DEMONSTRATION --> 
  
     <!--     
      <div class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div> -->

      <!-- <div  onrender="rendered()" class="fb-share-button" data-href="http://developers.facebook.com/docs/plugins/" data-type="button_count"></div>
  
      <div  onrender="rendered()" class="fb-send" data-href="http://developers.facebook.com/docs/plugins/" data-colorscheme="light"></div>
 
      <div  onrender="rendered()" class="fb-post" data-href="https://www.facebook.com/FacebookDevelopers/posts/10151471074398553" data-width="500"></div>

      <div  onrender="rendered()" class="fb-follow" data-href="http://www.facebook.com/zuck" data-colorscheme="light" data-layout="standard" data-show-faces="true"></div>

      <div  onrender="rendered()" class="fb-comments" data-href="http://example.com/comments" data-numposts="5" data-colorscheme="light"></div>

      <div  onrender="rendered()" class="fb-comments-count" data-href="http://example.com/comments"></div>
 
      <div  onrender="rendered()" class="fb-activity" data-site="developers.facebook.com" data-action="likes, recommends" data-colorscheme="light" data-header="true"></div>
    
      <div  onrender="rendered()" class="fb-recommendations" data-site="developers.facebook.com" data-action="likes, recommends" data-colorscheme="light" data-header="true"></div>
   
      <div  onrender="rendered()" class="fb-recommendations-bar" data-site="developers.facebook.com" data-read-time="30" data-side="left" data-action="like"></div>
   
      <div  onrender="rendered()" class="fb-like-box" data-href="http://www.facebook.com/FacebookDevelopers" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="true"></div>
    
      <div  onrender="rendered()" class="fb-facepile" data-href="http://facebook.com/FacebookDevelopers" data-max-rows="1" data-colorscheme="light" data-size="medium" data-show-count="true"></div> -->
   

      <!-- FACEBOOK DIRECTIVE DEMONSTRATION -->
           

        <!-- *************************add task top card*************************** -->
        <div class = "addtodoTask" >   
          <div class="cardHead"></div>    
          <div class = "cardBody">
            <form horizontal layout >
              <div class="inputGoal">
              <div>
                <paper-input-decorator auto-complete floatingLabel label="What is your goal ?" id="taskNameDeco" error="Value must start with a number!">
                   <input id="taskName" ng-model="goalformdata.goalName" is="core-input">
                   </paper-input-decorator>
               </div>
                <div> 
                <paper-input-decorator auto-complete floatingLabel label="Write about it .." id="taskDescDeco" error="Value must start with a number!">
                   <input id="taskDesc" ng-model="goalformdata.goalDesc" is="core-input">
                   </paper-input-decorator>
                   <p id="errMsgs"></p>
               </div>
                <!-- use local ajax -->
                <div class="buttonAdd">
                <paper-button raised ng-click="addGoals()">Add Goal</paper-button>
                <!-- use firebase connection -->
                 <!-- <button on-click="{{addGoal}}">Add Goal</button> -->
                </div>
               </div>
             </form>
            </div>      
            <div class = "cardFooterAdd" >
                 <core-icon-button class="room iconbar" icon="room"></core-icon-button>
                 <core-icon-button class="phone iconbar" icon="perm-phone-msg"></core-icon-button>
                 <core-icon-button class="star iconbar" icon="star"></core-icon-button>
                 <core-icon-button class="reply iconbar" icon="reply"></core-icon-button>
             </div>   
         </div>
        <!-- ************************* end of add task top card *************************** -->

         <!-- *************************Search Card fixed top card*************************** -->
        <div class = "searchGoogle" >   
          <div class = "cardBody">
              <gcse:search enableAutoComplete="true"></gcse:search>
            </div>               
         </div>
        <!-- ************************* end of search Card fixed top card *************************** -->

        <!-- ***************************Each card for task display******************** -->       
        <ul class = "holdTaskul" ng-repeat="view in filtered = userGoalArr | orderBy:'-created'">      
          <div class = "todoTask" >   
              <div class = "cardHead" > 
                <span ng-class="{inActive:'{{view.isActive}}'}" ng-click="iDid(view._id)">  
                  <bs-switch
                      ng-model="view.isTodo"
                      type="checkbox"
                      switch-on-text="{{ onText }}"
                      switch-off-text="{{ offText }}"
                      switch-on-color="{{ onColor }}"
                      switch-off-color="{{ offColor }}"
                      switch-animate="{{ animate }}"
                      switch-size="{{ size }}"
                      switch-label="{{ label }}"
                      switch-icon="{{ icon }}"
                      switch-radio-off="{{ radioOff }}"
                      switch-label-width="{{ labelWidth }}"
                      switch-handle-width="{{ handleWidth }}"
                      switch-wrapper="{{ wrapper }}"
                      ng-true-value="'yep'"
                      ng-false-value="'nope'"
                      switch-inverse="{{ inverse }}">
                  </bs-switch>
                </span>
                <span class="taskTitle"><strong>{{view.goalName | capitalize}}</strong></span>
                <span class="arrowDown">
                  <paper-menu-button>
                    <paper-icon-button icon="expand-more">
                    </paper-icon-button>
                    <paper-dropdown layered class="dropdown" halign="right">
                      <core-menu class="menu">
                        <span id="removeTask" ng-click="remove(view._id)"><paper-item>Remove</paper-item></span>
                        <span id="bucketList" ng-click="addToBucketList()"><paper-item>Bucket List</paper-item></span>
                        <span id ="forLater" ng-click="wishList()"><paper-item>Wish List</paper-item></span>
                      </core-menu>
                    </paper-dropdown>
                  </paper-menu-button>
                  </span>
               </div>    
              <paper-progress value="{{view.taskProgress}}" secondaryProgesss="30"></paper-progress>
              <!--  <button on-click="{{opendialog}}">ShowDialog</button> -->
              <div class = "cardBody" >
                <span class="taskDetails" horizontal start-justified layout>
                  {{view.goalDesc}}
                 </span>
               </div>
              <div class= "mapBox" ng-class="{inActive:'{{view.isActive}}'}" id = "map-{{view._id}}">
                <google-map latitude="{{view.latitude}}" longitude="{{view.longitude}}" fitToMarkers>
                   <!--    <google-map-marker latitude="{{view.latitude}}" longitude="{{view.longitude}}}"
                          draggable="true" title="Go Giants!">
                      </google-map-marker> -->
                   </google-map>
               </div>
                 <!-- ##################FACEBOOK Connect################# -->
             <div class="socialBox" id="social-{{view._id}}">
                <!-- <facebook-like-button pageurl="http://ididapp.herokuapp.com"></facebook-like-button> -->
               <span class="fb-send" data-href="http://ididapp.herokuapp.com" data-colorscheme="light">
               </span>
               <span class="fb-like" data-href="http://ididapp.herokuapp.com" 
                data-layout="standard" data-action="like" data-show-faces="false" data-share="true">
                </span>
              </div>
          <!--      <div class="fb-comments" id="comments-{{view._id}}" data-href="http://ididapp.herokuapp.com" 
                    data-numposts="5" data-colorscheme="light" data-width="100%">
                </div>  -->
               
              <!-- ##################FACEBOOK Connect################# -->
             
              <div class="container imgBox" id="image-{{view._id}}">
                <div class="row" ng-repeat="image in imageData track by $index">
                  <div class="col-md-3 col-sm-4 col-xs-6">
                    <img class="img-responsive" src="{{image.path}}" />
                  </div>
                  </div>
                </div>

              <div class = "taskListClass" id="taskListDiv-{{view._id}}">
                <div ng-class="{inActive:'{{view.isActive}}'}">
                    <paper-input-decorator auto-complete floatingLabel label="Goal specific tasks .. " id="taskNameDeco">
                       <input id="taskName" ng-model="taskformdata.task" is="core-input" required>
                    </paper-input-decorator>
                    <!-- <button ng-click="addTaskItem(view._id)">add task</button> -->
                    <paper-button raised class="addTaskBtn" recenteringTouch='true' fill='true'  ng-click="addTaskItem(view._id)">Add task</paper-button>
                   </div>
                  <div class="list-group disTaskGrp">
                      <a href="#" class="list-group-item active">
                        Things to do ::
                      </a>
                      <ul ng-repeat="task in taskdata track by $index">
                        <div class="funkyradio">
                          <div class="funkyradio-info">
                <input type="checkbox" name="checkbox" id="checkbox{{view._id}}{{$index}}" ng-model="task.task_completed"
                              ng-click="taskDone(view._id,task._id)"/>
                              <label for="checkbox{{view._id}}{{$index}}">{{task.task}}
                                <!-- <a href="#" class="list-group-item"></a> -->
                              </label>
                          </div>
                        </div>
                      </ul>
                      </div>
                 </div>
              
              <div class = "cardComment" >        
              <div class = "cardFooter" >
              
              <div class="shareDiv" id="share-{{view._id}}">
       
                <div id="share-buttons">
                 
                    <!-- Facebook -->
                    <a href="http://www.facebook.com/sharer.php?u=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/facebook.png" alt="Facebook" /></a>
                     
                    <!-- Twitter -->
                    <a href="http://twitter.com/share?url=https://ididapp.herokuapp.com&text=Simple Share Buttons&hashtags={{view.goalName}}" target="_blank"><img src="./assets/images/somacro/twitter.png" alt="Twitter" /></a>
                     
                    <!-- Google+ -->
                    <a href="https://plus.google.com/share?url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/google.png" alt="Google" /></a>
                     
                    <!-- Digg -->
                    <a href="http://www.digg.com/submit?url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/diggit.png" alt="Digg" /></a>
                     
                    <!-- Reddit -->
                    <a href="http://reddit.com/submit?url=https://ididapp.herokuapp.com&title=iDidApp" target="_blank"><img src="./assets/images/somacro/reddit.png" alt="Reddit" /></a>
                     
                    <!-- LinkedIn -->
                    <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/linkedin.png" alt="LinkedIn" /></a>
                     
                    <!-- Pinterest -->
                    <a href="javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());"><img src="./assets/images/somacro/pinterest.png" alt="Pinterest" /></a>
                     
                    <!-- StumbleUpon-->
                    <a href="http://www.stumbleupon.com/submit?url=https://ididapp.herokuapp.com&title=iDidApp" target="_blank"><img src="./assets/images/somacro/stumbleupon.png" alt="StumbleUpon" /></a>
                     
                    <!-- Email -->
                    <a href="mailto:?Subject=Send Task&Body=I%20saw%20this%20and%20thought%20of%20you!%20 https://ididapp.herokuapp.com"><img src="./assets/images/somacro/email.png" alt="Email" /></a>
                 
                </div>
              </div>

                <span ng-click = "toggleMap(view._id)">
                  <core-icon-button class="room iconbar" icon="room">
                  </core-icon-button>
                 </span>
                <core-icon-button class = "phone iconbar" icon="perm-phone-msg"></core-icon-button>
                <span ng-click = "makeFav(view._id)" >
                  <core-icon-button class="star iconbar" icon="star" ng-class="{starFav:view.isFav}">
                  </core-icon-button>
                 </span>
                 <span ng-click = "toggleImage(view._id)" >
                  <core-icon-button class="perm-media iconbar" icon="perm-media">
                  </core-icon-button>
                 </span>

                <form id ="uploadForm" enctype ="multipart/form-data" action ="/uploads" method ="post">
                    <span class = "fileUpload" id="fileUpload-{{view._id}}" ng-click="showUpload(view._id)" ng-class="{inActive:'{{view.isActive}}'}">
                      <core-icon-button class="attachment iconbar" type= "input" icon="attachment">
                         <input type="file" id="upload-{{view._id}}" name="file" multiple class="upload" />
                         <input type="hidden" name="goal_id" value="{{view._id}}" />
                         <input type="hidden" name="user_id" value="{{getCurrentUser()._id}}" />
                         <!-- <input type="file" file-model="myFile"/> -->
                      </core-icon-button>
                     </span>

                    <span class = "fileSubmit" id="fileSubmit-{{view._id}}">
                      <core-icon-button class="cloud-upload iconbar" id="uploadBtn" icon="cloud-upload">
                        <!-- <input type="submit" class="uploadSubmit" name="submit"> -->
                        <button class="uploadSubmit" ng-click="uploadImage(view._id)">upload me</button>
                      </core-icon-button>
                     </span>
                 </form>
                 <span ng-click = "toggleShare(view._id)" >
                    <core-icon-button class = "reply iconbar" icon="reply"></core-icon-button> 
                 </span>
                <span ng-click = "showTask(view._id)">
                  <core-icon-button class="note-add iconbar" icon="note-add"></core-icon-button>
                 </span>
                <span ng-click = "toggleSocial(view._id)">
                  <core-icon-button class="tab iconbar" icon="tab"></core-icon-button>
                 </span> 
                <span ng-click = "mailModal()" ng-class="{inActive:'{{view.isActive}}'}">
                  <core-icon-button class="mail iconbar" icon="mail"></core-icon-button>
                 </span>
               </div>  
         </ul>    
        <!-- *************************** ## End of cards ## ******************** -->  
       </div>  
     </core-header-panel>
   </section>
 </core-drawer-panel>   


