<div ng-include="'components/navbar/navbar.html'"></div>

<!-- Paper dialog of email compose will be displayed on click -->
<paper-dialog transition="core-transition-center" id="emailModal" backdrop closeSelector="[affirmative]" resizerIsPeer=false>
 <!-- <input type="text" ng-model="myData" /> -->
     <!-- *************************add task top card*************************** -->
      <div class = "todoTask" >   
        <div class="emailCardHead">Compose: 
        </div>    
        <div class = "cardBody">
          <form horizontal layout >
            <div>
            <div>
              <paper-input-decorator label="To: " class="inputEmail" id="mailTo" error="Value must start with a number!">
                 <input id="taskName" ng-model="formdata.mailTo" is="core-input">
                 </paper-input-decorator>
             </div>
            <div class="inputEmail">
              <paper-input-decorator label="Subject:" class="inputEmail" id="mailSubject" error="Value must start with a number!">
                 <input id="taskDesc" ng-model="formdata.mailSubject" is="core-input">
                 </paper-input-decorator>
                 <p id="errMsg"></p>
             </div>
            <div>
              <paper-autogrow-textarea label=" " id="a1">
                <textarea class="textAreaClass" id="t1" ng-model="formdata.mailText" placeholder="write short email"></textarea>
              </paper-autogrow-textarea>
             </div>
              <!-- use local ajax -->
              <div class="buttonAdd">
              <paper-button raised affirmative class="emailBtn" ng-click="sendMail()">Send</paper-button>
              <paper-button raised dismissive class="emailDraftBtn" ng-click="saveMail()">Draft</paper-button>
              <!-- use firebase connection -->
               <!-- <button on-click="{{addGoal}}">Add Goal</button> -->
              </div>
             </div>
           </form>
          </div>      
          <div class = "cardFooterAdd" >
           </div>   
      </div>
  </paper-dialog>

<!-- Directive called here   -->
<!-- <main-modal></main-modal> -->
<core-drawer-panel transition id="core_drawer_panel" touch-action>
  <section id= "section1" drawer>
    <core-menu selected="1" selectedindex="1" id="core_menu"> 
      <core-submenu id="core_submenu" icon="settings" label="Todos">
        <core-item id="core_item1" label="This week" horizontal center layout></core-item>
        <core-item id="core_item2" label="Last week" horizontal center layout></core-item>
       </core-submenu>
      <core-submenu active id="core_submenu1" icon="settings" label="iDid">
        <core-item id="core_item3" label="This year" horizontal center layout></core-item>
        <core-item id="core_item4" label="Last year" horizontal center layout></core-item>
        <core-item id="core_item5" label="Timeline" horizontal center layout></core-item>
       </core-submenu>
     </core-menu>
   </section>
  <section id= "section2" main>
    <core-header-panel condenses flex mode="waterfall-tall" id="core_header_panel">

           <!-- geo-location element applied -->
            <div class="userLocation">
              <geo-location watchpos latitude="{{lat}}" longitude="{{longitude}}"></geo-location>
             </div>
      <div class="bottom indent todo">
          
      <!-- FACEBOOK WITH EZFB -->
    <div class="container">
      <h2>angular-easyfb API demo (promise version)</h2>

      <div>
        <button class="btn btn-primary" ng-click="login()" ng-disabled="loginStatus.status == 'connected'">Connect with Facebook</button>
         &nbsp; 
        <button class="btn btn-danger" ng-click="logout()" ng-disabled="!loginStatus || loginStatus.status != 'connected'">Logout</button>
         &nbsp;
        <button class="btn btn-success" ng-click="share()">FB.ui</button>
      </div>

      <br>

      <h4>
        Hello, <span ng-show="me.name">{{ me.name }}</span><span ng-show="me.error">unkown</span>!
      </h4>

          <div class="row">
            <div class="col-md-6">
              <h4 class="text-info">$FB.loginStatus()</h4>
              <div class="code-block" hljs source="loginStatusJSON"></div>
            </div>
            <div class="col-md-6">
              <h4 class="text-info">$FB.api('/me') & $FB.api('/me/likes')</h4>
              <div class="code-block" hljs source="apiResJSON"></div>
            </div>
          </div>

        </div>
          
          <br>

          <div class="row">
            <div class="col-md-6">
              <h4 class="text-info">$FB.loginStatus()</h4>
              <div class="code-block" hljs source="loginStatusJSON"></div>
            </div>
            <div class="col-md-6">
              <h4 class="text-info">$FB.api('/me')</h4>
              <div class="code-block" hljs source="apiMeJSON"></div>
            </div>
          </div>

        </div>
           <!-- FACEBOOK WITH EZFB -->

           <!-- FACEBOOK DIRECTIVE DEMONSTRATION -->
           <a href="https://github.com/pc035860/angular-easyfb">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" />
    </a>
    <div class="container">
      <h2>angular-easyfb social plugins demo</h2>
      
      <ul class="nav nav-tabs">
        <li ng-repeat="dir in SOCIAL_PLUGINS" ng-class="{active: isActive(dir)}">
          <a href="" ng-click="goto(dir)">{{ dir }}</a>
        </li>
      </ul>
      
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="pull-left hint-text">
            <span class="text-danger" ng-show="!pluginOn">No plugin in view</span>
            <span class="text-success" ng-show="!rendering">Social plugin rendered</span>
            <span class="text-muted" ng-show="rendering && pluginOn">Rendering...</span>
          </div>
          <div class="pull-right">
            <button class="btn btn-success" ng-show="!pluginOn" ng-click="pluginOn = !pluginOn">On</button>
            <button class="btn btn-default" ng-show="pluginOn" ng-click="pluginOn = !pluginOn">Off</button>
          </div>
        </div>
      </div>
      
      <div class="ng-view-container">
        <div ng-view></div>
      </div>
    </div>
    
    
    <script type="text/ng-template" id="like.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-like" data-href="https://developers.facebook.com/docs/plugins/" data-layout="standard" data-action="like" data-show-faces="true" data-share="true"></div>
    </script>

    <script type="text/ng-template" id="share-button.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-share-button" data-href="http://developers.facebook.com/docs/plugins/" data-type="button_count"></div>
    </script>

    <script type="text/ng-template" id="send.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-send" data-href="http://developers.facebook.com/docs/plugins/" data-colorscheme="light"></div>
    </script>

    <script type="text/ng-template" id="post.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-post" data-href="https://www.facebook.com/FacebookDevelopers/posts/10151471074398553" data-width="500"></div>
    </script>

    <script type="text/ng-template" id="follow.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-follow" data-href="http://www.facebook.com/zuck" data-colorscheme="light" data-layout="standard" data-show-faces="true"></div>
    </script>

    <script type="text/ng-template" id="comments.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-comments" data-href="http://example.com/comments" data-numposts="5" data-colorscheme="light"></div>
    </script>

    <script type="text/ng-template" id="comments-count.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-comments-count" data-href="http://example.com/comments"></div>
    </script>

    <script type="text/ng-template" id="activity.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-activity" data-site="developers.facebook.com" data-action="likes, recommends" data-colorscheme="light" data-header="true"></div>
    </script>

    <script type="text/ng-template" id="recommendations.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-recommendations" data-site="developers.facebook.com" data-action="likes, recommends" data-colorscheme="light" data-header="true"></div>
    </script>

    <script type="text/ng-template" id="recommendations-bar.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-recommendations-bar" data-site="developers.facebook.com" data-read-time="30" data-side="left" data-action="like"></div>
    </script>

    <script type="text/ng-template" id="like-box.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-like-box" data-href="http://www.facebook.com/FacebookDevelopers" data-colorscheme="light" data-show-faces="true" data-header="true" data-stream="false" data-show-border="true"></div>
    </script>

    <script type="text/ng-template" id="facepile.html">
      <div ng-if="pluginOn" onrender="rendered()" class="fb-facepile" data-href="http://facebook.com/FacebookDevelopers" data-max-rows="1" data-colorscheme="light" data-size="medium" data-show-count="true"></div>
    </script>


           <!-- FACEBOOK DIRECTIVE DEMONSTRATION -->
           

         <!-- FACEBOOK INTERPOLATED EXAMPLE   -->
          
        <div class="container">
          <h2>angular-easyfb social plugins demo2</h2>
          <p>&nbsp;</p>
          <div class="row" style="margin-bottom: 20px;" 
            ng-repeat="pageHref in fanPages">
            
            <span ng-init="widget.href = pageHref"></span>
            <div class="col-sm-6">
              <input class="form-control" type="text" ng-model="widget.href" />
            </div>
            <div class="col-sm-3" style="padding-top: 5px;">
              <div class="fb-like" onrender="widget.rendered = true" data-href="{{ widget.href }}" data-layout="button_count" data-action="like" data-show-faces="true" data-share="true"></div>
            </div>
            <div class="col-sm-3" style="font-size: 18px;">
              <strong ng-show="widget.rendered" class="text-success">Rendered</strong>
              <span ng-show="!widget.rendered" class="text-muted">Rendering</span>
            </div>
          </div>
        </div>
          <!-- FACEBOOK INTERPOLATED EXAMPLE   -->


        <!-- *************************add task top card*************************** -->
        <div class = "addtodoTask" >   
          <div class="cardHead"></div>    
          <div class = "cardBody">
            <form horizontal layout >
              <div class="inputGoal">
              <div>
                <paper-input-decorator auto-complete floatingLabel label="What is your goal ?" id="taskNameDeco" error="Value must start with a number!">
                   <input id="taskName" ng-model="goalformdata.goalName" is="core-input">
                   </paper-input-decorator>
               </div>
                <div> 
                <paper-input-decorator auto-complete floatingLabel label="Write about it .." id="taskDescDeco" error="Value must start with a number!">
                   <input id="taskDesc" ng-model="goalformdata.goalDesc" is="core-input">
                   </paper-input-decorator>
                   <p id="errMsgs"></p>
               </div>
                <!-- use local ajax -->
                <div class="buttonAdd">
                <paper-button raised ng-click="addGoals()">Add Goal</paper-button>
                <!-- use firebase connection -->
                 <!-- <button on-click="{{addGoal}}">Add Goal</button> -->
                </div>
               </div>
             </form>
            </div>      
            <div class = "cardFooterAdd" >
                 <core-icon-button class="room iconbar" icon="room"></core-icon-button>
                 <core-icon-button class="phone iconbar" icon="perm-phone-msg"></core-icon-button>
                 <core-icon-button class="star iconbar" icon="star"></core-icon-button>
                 <core-icon-button class="reply iconbar" icon="reply"></core-icon-button>
             </div>   
         </div>
        <!-- ************************* end of add task top card *************************** -->

         <!-- *************************Search Card fixed top card*************************** -->
        <div class = "searchGoogle" >   
          <div class = "cardBody">
              <gcse:search enableAutoComplete="true"></gcse:search>
            </div>               
         </div>
        <!-- ************************* end of search Card fixed top card *************************** -->

        <!-- ***************************Each card for task display******************** -->       
        <ul class = "holdTaskul" ng-repeat="view in filtered = userGoalArr | orderBy:'-created'">      
          <div class = "todoTask" >   
              <div class = "cardHead" > 
                <span ng-class="{inActive:'{{view.isActive}}'}" ng-click="iDid(view._id)">  
                  <bs-switch
                      ng-model="view.isTodo"
                      type="checkbox"
                      switch-on-text="{{ onText }}"
                      switch-off-text="{{ offText }}"
                      switch-on-color="{{ onColor }}"
                      switch-off-color="{{ offColor }}"
                      switch-animate="{{ animate }}"
                      switch-size="{{ size }}"
                      switch-label="{{ label }}"
                      switch-icon="{{ icon }}"
                      switch-radio-off="{{ radioOff }}"
                      switch-label-width="{{ labelWidth }}"
                      switch-handle-width="{{ handleWidth }}"
                      switch-wrapper="{{ wrapper }}"
                      ng-true-value="'yep'"
                      ng-false-value="'nope'"
                      switch-inverse="{{ inverse }}">
                  </bs-switch>
                </span>
                <span class="taskTitle"><strong>{{view.goalName | capitalize}}</strong></span>
                <span class="arrowDown">
                  <paper-menu-button>
                    <paper-icon-button icon="expand-more">
                    </paper-icon-button>
                    <paper-dropdown layered class="dropdown" halign="right">
                      <core-menu class="menu">
                        <span id="removeTask" ng-click="remove(view._id)"><paper-item>Remove</paper-item></span>
                        <span id="bucketList" ng-click="addToBucketList()"><paper-item>Bucket List</paper-item></span>
                        <span id ="forLater" ng-click="wishList()"><paper-item>Wish List</paper-item></span>
                      </core-menu>
                    </paper-dropdown>
                  </paper-menu-button>
                  </span>
               </div>    
              <paper-progress value="{{view.taskProgress}}" secondaryProgesss="30"></paper-progress>
              <!--  <button on-click="{{opendialog}}">ShowDialog</button> -->
              <div class = "cardBody" >
                <span class="taskDetails" horizontal start-justified layout>
                  {{view.goalDesc}}
                 </span>
               </div>
              <div class= "mapBox" ng-class="{inActive:'{{view.isActive}}'}" id = "map-{{view._id}}">
                <google-map latitude="{{view.latitude}}" longitude="{{view.longitude}}" fitToMarkers>
                   <!--    <google-map-marker latitude="{{view.latitude}}" longitude="{{view.longitude}}}"
                          draggable="true" title="Go Giants!">
                      </google-map-marker> -->
                   </google-map>
               </div>
                 <!-- ##################FACEBOOK Connect################# -->
             <div class="socialBox" id="fbDiv-{{view._id}}">
                <facebook-like-button></facebook-like-button>
                <div class="fb-comments" id="fb-comment-{{view._id}}" data-href="http://ididapp.herokuapp.com/" data-numposts="5" data-width="100%" data- colorscheme="light">
                  </div>
              </div>
              <!-- ##################FACEBOOK Connect################# -->
             
              <div class="container imgBox" id="image-{{view._id}}">
                <div class="row" ng-repeat="image in imageData track by $index">
                  <div class="col-md-3 col-sm-4 col-xs-6">
                    <img class="img-responsive" src="{{image.path}}" />
                  </div>
                  </div>
                </div>

              <div class = "taskListClass" id="taskListDiv-{{view._id}}">
                <div ng-class="{inActive:'{{view.isActive}}'}">
                    <paper-input-decorator auto-complete floatingLabel label="Goal specific tasks .. " id="taskNameDeco">
                       <input id="taskName" ng-model="taskformdata.task" is="core-input" required>
                    </paper-input-decorator>
                    <!-- <button ng-click="addTaskItem(view._id)">add task</button> -->
                    <paper-button raised class="addTaskBtn" recenteringTouch='true' fill='true'  ng-click="addTaskItem(view._id)">Add task</paper-button>
                   </div>
                  <div class="list-group disTaskGrp">
                      <a href="#" class="list-group-item active">
                        Things to do ::
                      </a>
                      <ul ng-repeat="task in taskdata track by $index">
                        <div class="funkyradio">
                          <div class="funkyradio-info">
                <input type="checkbox" name="checkbox" id="checkbox{{view._id}}{{$index}}" ng-model="task.task_completed"
                              ng-click="taskDone(view._id,task._id)"/>
                              <label for="checkbox{{view._id}}{{$index}}">{{task.task}}
                                <!-- <a href="#" class="list-group-item"></a> -->
                              </label>
                          </div>
                        </div>
                      </ul>
                      </div>
                 </div>
              
              <div class = "cardComment" >        
              <div class = "cardFooter" >
              
              <div class="shareDiv" id="share-{{view._id}}">
       
                <div id="share-buttons">
                 
                    <!-- Facebook -->
                    <a href="http://www.facebook.com/sharer.php?u=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/facebook.png" alt="Facebook" /></a>
                     
                    <!-- Twitter -->
                    <a href="http://twitter.com/share?url=https://ididapp.herokuapp.com&text=Simple Share Buttons&hashtags={{view.goalName}}" target="_blank"><img src="./assets/images/somacro/twitter.png" alt="Twitter" /></a>
                     
                    <!-- Google+ -->
                    <a href="https://plus.google.com/share?url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/google.png" alt="Google" /></a>
                     
                    <!-- Digg -->
                    <a href="http://www.digg.com/submit?url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/diggit.png" alt="Digg" /></a>
                     
                    <!-- Reddit -->
                    <a href="http://reddit.com/submit?url=https://ididapp.herokuapp.com&title=iDidApp" target="_blank"><img src="./assets/images/somacro/reddit.png" alt="Reddit" /></a>
                     
                    <!-- LinkedIn -->
                    <a href="http://www.linkedin.com/shareArticle?mini=true&url=https://ididapp.herokuapp.com" target="_blank"><img src="./assets/images/somacro/linkedin.png" alt="LinkedIn" /></a>
                     
                    <!-- Pinterest -->
                    <a href="javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());"><img src="./assets/images/somacro/pinterest.png" alt="Pinterest" /></a>
                     
                    <!-- StumbleUpon-->
                    <a href="http://www.stumbleupon.com/submit?url=https://ididapp.herokuapp.com&title=iDidApp" target="_blank"><img src="./assets/images/somacro/stumbleupon.png" alt="StumbleUpon" /></a>
                     
                    <!-- Email -->
                    <a href="mailto:?Subject=Send Task&Body=I%20saw%20this%20and%20thought%20of%20you!%20 https://ididapp.herokuapp.com"><img src="./assets/images/somacro/email.png" alt="Email" /></a>
                 
                </div>
              </div>

            

                <span ng-click = "toggleMap(view._id)">
                  <core-icon-button class="room iconbar" icon="room">
                  </core-icon-button>
                 </span>
                <core-icon-button class = "phone iconbar" icon="perm-phone-msg"></core-icon-button>
                  <!--<template bind if="{{ view.isFav == true }}">
                    <core-icon-button class="star iconbar isFav" icon="star"></core-icon-button>
                  </template>
                  <template bind if="{{ view.isFav == false}}"> -->
                <span ng-click = "makeFav(view._id)" >
                  <core-icon-button class="star iconbar" icon="star" ng-class="{starFav:view.isFav}">
                  </core-icon-button>
                 </span>
                 <span ng-click = "toggleImage(view._id)" >
                  <core-icon-button class="perm-media iconbar" icon="perm-media">
                  </core-icon-button>
                 </span>
                <!-- </template> -->

                <form id ="uploadForm" enctype ="multipart/form-data" action ="/uploads" method ="post">
                    <span class = "fileUpload" id="fileUpload-{{view._id}}" ng-click="showUpload(view._id)" ng-class="{inActive:'{{view.isActive}}'}">
                      <core-icon-button class="attachment iconbar" type= "input" icon="attachment">
                         <input type="file" id="upload-{{view._id}}" name="file" multiple class="upload" />
                         <input type="hidden" name="goal_id" value="{{view._id}}" />
                         <input type="hidden" name="user_id" value="{{getCurrentUser()._id}}" />
                         <!-- <input type="file" file-model="myFile"/> -->
                      </core-icon-button>
                     </span>

                    <span class = "fileSubmit" id="fileSubmit-{{view._id}}">
                      <core-icon-button class="cloud-upload iconbar" id="uploadBtn" icon="cloud-upload">
                        <!-- <input type="submit" class="uploadSubmit" name="submit"> -->
                        <button class="uploadSubmit" ng-click="uploadImage(view._id)">upload me</button>
                      </core-icon-button>
                     </span>
                 </form>
                 <span ng-click = "toggleShare(view._id)" >
                    <core-icon-button class = "reply iconbar" icon="reply"></core-icon-button> 
                 </span>
                <span ng-click = "showTask(view._id)">
                  <core-icon-button class="note-add iconbar" icon="note-add"></core-icon-button>
                 </span>
                <span ng-click = "toggleSearch(view._id)">
                  <core-icon-button class="search iconbar" icon="search"></core-icon-button>
                 </span> 
                <span ng-click = "mailModal()" ng-class="{inActive:'{{view.isActive}}'}">
                  <core-icon-button class="mail iconbar" icon="mail"></core-icon-button>
                 </span>
               </div>  
         </ul>    
        <!-- *************************** ## End of cards ## ******************** -->  
       </div>  
     </core-header-panel>
   </section>
 </core-drawer-panel>   

<!-- <my-element></my-element> -->

